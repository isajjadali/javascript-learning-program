
let students = [
    {
        subjects: [
            {
                math: 80
            },
            {
                english: 33
            },
            {
                urdu: 75
            },
            {
                computer: 90
            }
        ],
        attendences: [
            {
                monday: 'present'
            },
            {
                tuesday: 'absent'
            },
            {
                wednesday: 'present'
            },
            {
                thursday: 'present'
            },
            {
                thursday: 'present'
            },
            {
                thursday: 'present'
            },
            {
                thursday: 'present'
            },
            {
                thursday: 'present'
            }
        ],
    },
    {
        subjects: [
            {
                math: 80
            },
            {
                english: 33
            },
            {
                urdu: 75
            },
            {
                computer: 90
            }
        ],
        attendences: [
            {
                monday: 'present'
            },
            {
                tuesday: 'absent'
            },
            {
                wednesday: 'present'
            },
            {
                thursday: 'present'
            },
            {
                thursday: 'present'
            },
            {
                thursday: 'present'
            },
            {
                thursday: 'present'
            },
            {
                thursday: 'present'
            }
        ],
    },
    {
        subjects: [
            {
                math: 80
            },
            {
                english: 32
            },
            {
                urdu: 75
            },
            {
                computer: 90
            }
        ],
        attendences: [
            {
                monday: 'present'
            },
            {
                tuesday: 'absent'
            },
            {
                wednesday: 'present'
            },
            {
                thursday: 'present'
            },
            {
                thursday: 'present'
            },
            {
                thursday: 'present'
            },
            {
                thursday: 'present'
            },
            {
                thursday: 'present'
            }
        ],
    },
    {
        subjects: [
            {
                math: 90
            },
            {
                english: 80
            },
            {
                urdu: 85
            },
            {
                computer: 95
            }
        ],
        attendences: [
            {
                monday: 'absent'
            },
            {
                tuesday: 'present'
            },
            {
                wednesday: 'absent'
            },
            {
                thursday: 'present'
            },
            {
                thursday: 'absent'
            },
            {
                thursday: 'absent'
            },
            {
                thursday: 'absent'
            },
            {
                thursday: 'absent'
            }
        ],
    }
];


function listuser(passOrFail) {
    return students
        .map(student => {
            return {
                subjectsResult: student.subjects.every(subject => Object.values(subject)[0] >= 33),
                attendences: ((student.attendences.filter(attendence => Object.values(attendence)[0] === 'present').length) / student.attendences.length) * 100,
            }
        })
        .map(student => {
            return {
                ...student,
                result: (student.subjectsResult && student.attendences > 50) ? 'pass' : 'fail'
            }
        })
        .filter(student => student.result === passOrFail)
}


console.log('List Of Passed Students \n\n', JSON.stringify(listuser('pass'), null, 2));
console.log('\n\n List of Failed Students \n\n', JSON.stringify(listuser('fail'), null, 2));